<ui-page-header title="Crear puestos">
</ui-page-header>

<!-- ===== Formulario ===== -->
<section class="panel">
  <header class="panel-head">
    <h3>Nuevo puesto</h3>
  </header>

  <div class="panel-body">
    <form #formularioRef="ngForm" (ngSubmit)="guardar()">
      <div class="grid-3">
        <div>
          <label class="mb-1">Nombre*</label>
          <input class="form-control" [(ngModel)]="nuevo.nombre" name="nombre" required />
        </div>
        <div>
          <label class="mb-1">√Årea*</label>
          <input class="form-control" [(ngModel)]="nuevo.area" name="area" required />
        </div>
        <div>
          <label class="mb-1">Descripci√≥n*</label>
          <input class="form-control" [(ngModel)]="nuevo.descripcion" name="descripcion" required />
        </div>
      </div>

      <div class="end-actions">
        <button class="btn-primary" type="submit">{{ editando ? 'Actualizar' : 'Guardar' }}</button>
        <button class="btn-outline" type="button" (click)="cancelar()">Cancelar</button>
      </div>
    </form>
  </div>
</section>

<!-- ===== Importar Excel ===== -->
<section class="panel">
  <header class="panel-head">
    <h3>Importar desde Excel</h3>
    <div class="muted small">Plantilla: columnas <b>Nombre</b>, <b>Descripci√≥n</b>, <b>√Årea</b></div>
  </header>

  <div class="panel-body">
    <div class="file-row">
      <input type="file" (change)="subirExcel($event)" class="form-control" accept=".xlsx, .xls" style="max-width:320px" />
      <button class="btn-outline" (click)="cargarDesdeExcel()" [disabled]="!puestosExcel.length">
        ‚¨ÜÔ∏è Importar {{ puestosExcel.length || 0 }} puestos
      </button>
    </div>

    <table class="simple-preview" *ngIf="puestosExcel.length">
      <thead>
        <tr><th>Nombre</th><th>Descripci√≥n</th><th>√Årea</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of puestosExcel">
          <td>{{ p.nombre }}</td>
          <td>{{ p.descripcion }}</td>
          <td>{{ p.area }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- ===== Listado ===== -->
<section class="panel">
  <header class="panel-head">
    <h3>Puestos registrados</h3>
  </header>

  <div class="panel-body list-scroll">
    <div class="table-wrap">
      <table class="table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>√Årea</th>
            <th>Descripci√≥n</th>
            <th class="text-end">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr #filaPuestoRef *ngFor="let p of puestos; trackBy: trackById" [attr.data-id]="p.id">
            <td>{{ p.nombre }}</td>
            <td>{{ p.area }}</td>
            <td>{{ p.descripcion }}</td>
            <td class="text-end">
              <div class="actions">
                <button class="btn btn-sm btn-outline-primary" (click)="editar(p)" title="Editar">‚úèÔ∏è</button>
                <button class="btn btn-sm btn-outline-danger" (click)="eliminar(p.id!)" title="Eliminar">üóëÔ∏è</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- ===== Gu√≠a de plantilla ===== -->
<section class="panel">
  <header class="panel-head"><h3>Ejemplo de plantilla</h3></header>
  <div class="panel-body">
    <div class="table-wrap">
      <table class="table simple-preview">
        <thead>
          <tr><th>Nombre</th><th>Descripci√≥n</th><th>√Årea</th></tr>
        </thead>
        <tbody>
          <tr><td>Mec√°nico</td><td>Tareas mec√°nicas en l√≠nea</td><td>T√©cnica</td></tr>
          <tr><td>Supervisor</td><td>Control de producci√≥n</td><td>Formaci√≥n</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
